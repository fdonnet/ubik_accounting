apiVersion: v1
kind: Secret
metadata:
  name: ubik-keycloak-tls
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURRekNDQWlzQ0ZIMjNYdithYUk1bjF1U3ZVNDZSNTNrZVRhb3NNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1GNHgKQ3pBSkJnTlZCQVlUQWtGVk1STXdFUVlEVlFRSURBcFRiMjFsTFZOMFlYUmxNU0V3SHdZRFZRUUtEQmhKYm5SbApjbTVsZENCWGFXUm5hWFJ6SUZCMGVTQk1kR1F4RnpBVkJnTlZCQU1NRG10bGVXTnNiMkZyTFd4dlkyRnNNQjRYCkRUSTBNVEF5T1RFMU5UQTFOVm9YRFRJMU1UQXlPVEUxTlRBMU5Wb3dYakVMTUFrR0ExVUVCaE1DUVZVeEV6QVIKQmdOVkJBZ01DbE52YldVdFUzUmhkR1V4SVRBZkJnTlZCQW9NR0VsdWRHVnlibVYwSUZkcFpHZHBkSE1nVUhSNQpJRXgwWkRFWE1CVUdBMVVFQXd3T2EyVjVZMnh2WVdzdGJHOWpZV3d3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBCkE0SUJEd0F3Z2dFS0FvSUJBUURDTjhaNzhvSG5wVmpZclhtdnNpdFFhVzJ0TU8zMi9SSmZNbnhJSXhvK0NDRlcKZGdjOUpwMS9HaGxtRUIzUGZGUklMV3JHaGlOSXc1dlhZVVE0Q0pJdVVZYlBkL1cxWVdlMHhCMHBLQ0VtZHdIeQpENWdxTmFjcnNOZGhVeDcxQTBTU0l6aGtDL3psUFd0WnBYV1ZkMGtHUU1oQ0dWSTJCYVAzRG1sWkpmVW1lZEI3CjlIS0FYUkh6L3dnK2pSWHJsZ3FXazVGTmRLZXU4VVpJZUZ1MHB5VEZ5d20vekNOazhIRzIrM3ZCclRXUnFBSGkKeUVHYXFoRU91T3NsUXBDN3NXTitxRGZ2aEFtVlZOS3hlR2E1QkZyR3ZjeGpyMjE4QlFqVVdtbi9rQldQNmwzeApxd3pzTGw3RnVKN0twVEg3R0Fab1c0a2RNd0FRQ2J6YlRZZE9nUnpuQWdNQkFBRXdEUVlKS29aSWh2Y05BUUVMCkJRQURnZ0VCQUQyVXZtdDFmdmxLcmZyVmVIREJYdDQ0ZFVHM3l2MmtLOW4vTEpFL0g5K3l2Sjh2SUZRZU5Kb0IKekZaRXZGVGo3czhYUTFEQW1wQ2ZLN0ZDM0h1OEpkc1I1UDkrcmlyVENraDFRbHdEbHJyRDNucEFLcWlWa0lueQp1RmdKQmhRTkd0V01LSjZGZ1pGdVhNaGlCSW9OSEQ4YUlmV0puSEwzYzlqZW1rOE9PdHJJU2djWFo2emN0N2VtCjFXZnppWFc2N3FBemxCd1ozTVZ1a1EwUytjQ2ZCY0doOFYydThoRUdWWURQV29lLzBGTXQybmRNVkZDWUg5MWIKcHl1VzFpa2pTMzlrNzRpZkRBVmNQWEg0dVZMeER3dVY5QXhUMEg4ZVdjL054YnhCQ3pRL3NoSUZRVDRidUlVUwpudFRqTXVKN280MjA5bmpNaGFpb29TTE1FQnNSZHlFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRENOOFo3OG9IbnBWalkKclhtdnNpdFFhVzJ0TU8zMi9SSmZNbnhJSXhvK0NDRldkZ2M5SnAxL0dobG1FQjNQZkZSSUxXckdoaU5JdzV2WApZVVE0Q0pJdVVZYlBkL1cxWVdlMHhCMHBLQ0VtZHdIeUQ1Z3FOYWNyc05kaFV4NzFBMFNTSXpoa0MvemxQV3RaCnBYV1ZkMGtHUU1oQ0dWSTJCYVAzRG1sWkpmVW1lZEI3OUhLQVhSSHovd2cralJYcmxncVdrNUZOZEtldThVWkkKZUZ1MHB5VEZ5d20vekNOazhIRzIrM3ZCclRXUnFBSGl5RUdhcWhFT3VPc2xRcEM3c1dOK3FEZnZoQW1WVk5LeAplR2E1QkZyR3ZjeGpyMjE4QlFqVVdtbi9rQldQNmwzeHF3enNMbDdGdUo3S3BUSDdHQVpvVzRrZE13QVFDYnpiClRZZE9nUnpuQWdNQkFBRUNnZ0VBQWJBTlkvOVgvS1RWc0ZCVm1kN0EvSnBsN3hiWlFvZXhkSzFTSWloWDdva1EKalJsS2Q5QVJsMHlwUXRkS0F3Y1FEbTZDbW9ZSTRYVjlzYkh4TDFGM3Y3cEtveHZtUVRTKyszV20wVGc5allHRQpQVS9BWVVHRkdkNllDSXI1M21Rd1lOcTRmem9SY1FhSEc4alJ6RUkwbXI3T1hyQ3NvN2FKMWJoRTF4YjYyZUk2Ck9ZTkxPOU5HTklZSTRkT1ZQbFExSVYxNEFmZzlkenkzc1pDZlgyZ3VFRFVjQ1ZKeTVUSHBIM1pQK0VGNGNPZ08KbHFkV29mYWxKQWNIOFRpOW80WUptU2U4NTdjb3lQTVIwVTBicHZKQjg0WnhCM1k1Z0Y2WFNCaFIzc2hDOE9RdQp3b1E2K2M1S0dlNUNSTmh5SFVkZnF5amNRSkdpUFNORVljU1ltY0ltalFLQmdRRHJkZkVPOC92bmpYZ3ZKVzVvCnR3VlA3TmhaVVZKdEVVWG56cGsvOHFMdk83clpneGRTQXZYa1l2YnVBb25mZDNLaFRObE5mOGtwYnpEQjhwUXAKYnZSaUs4UU4xakxwdW1jclNNU1dGVFI4OTN6Y0VDRTdPNVlUTm9oTG1PODdrbEFXcFlBMG9OQ214TlhiODFpOQoxV0d4OFM3RmxMbVFoMTdKcWhZVjVaSklLd0tCZ1FEVEtOZXN4QjI1Y0JWaktZcjZqOWJmUkJpTStLYWtDYklrCmxneUpwc3dJYWRoV3M1dzR0UUI2Uitqd1lwQjdCS0h3SEppK0J2bVUxWjhaazNoTXFNOWhidzlLZkM2QzdML28KYkJ0ekhhdnplK3FiYVQ0eTRqZlRYcDQzRkJVdEZTV1BsSXRGRDYrU21EWU9pYWtTZ0V1WDRNeGh5NER3YkZoMAphYVFQZXdhRU5RS0JnUUM4dklsQlp5amdibkdMdVFGTFJva25pNzNQdW5QTG9URGJvcXNNcXowWGJsVlR6TlNBCmxJYnRUcmFJQ2RqaUd5anpTbHBVMkwweVRVSlQ5RkgyOUUxSDg3VHZNbWNWR3FsZjlMQS9iVGZwZzZlOTdkLzEKVHNuNUZKa2puNjhEblVBOUp1UWhTMVowbHdxbGgrWDJKSGh1M2RpVDM2YnV4dE9mNm9wUmV2ZEtpUUtCZ0hhTgptTUZ6L21oTnFJUmJINTlid0x6clk0bEtWVzBGMEpHLytOd1QzTHZnaVVqc1lJcHAvUkdxYS9zQ3E3R1Z3VUdwCkhJeWNKK1pMSlo5YmI1QkN1dVF1VVh4MVNqdlJwbEZjMlBDQnVUZmoyNjFUb2tzNVBUU2NDK0pLa1RVVmlWZ2EKZ3pMTUFyd2dYMEU4UXNPVGFsMmtKYnZHWU9jYlBYSm1tV2pqbnAzOUFvR0JBS05QeEtMdlFKS1JPaW10NXJWKwpnNno4TWVlOUFRZjZlekNPRktOVE0wZldpZzVCNms1WlNva084eldhR04vQm1ML3NYRmw0U0pHdGYwVHYxRjdqClgxdDZhbVJmQkx6OFd5Z0l3RkVYdnFFR0xTQk51eWgyRXZXN2hmbVFUV3dINVgxYzQvd01UdVhyTExpeUFIUDcKWFlRVnBoVGhGWGl2Skp0K0ptU0M1RzhtCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: keycloak-local
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/cors-allow-origin: "http://ubik-proxy, http://ubik-webapp, https://ubik-webapp"
    nginx.ingress.kubernetes.io/cors-allow-methods: "PUT, GET, POST, OPTIONS, DELETE"
    nginx.ingress.kubernetes.io/cors-allow-headers: "DNT,X-CustomHeader,X-LANG,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,X-Api-Key,X-Device-Id,Access-Control-Allow-Origin"
    nginx.ingress.kubernetes.io/configuration-snippet: |
         proxy_pass_header       Set-Cookie;
         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
spec:
  ingressClassName: nginx
  tls:
  - hosts:
    - keycloak-local
    secretName: ubik-keycloak-tls
  rules:
  - host: keycloak-local
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: keycloak-local
            port:
              number: 80
